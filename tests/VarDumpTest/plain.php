<?php

// Define cases
$line = substr_count(file_get_contents(__FILE__), "\n") - 5;
$header = sprintf('%-137s│', __FILE__ . ' : ' . $line);
$cases = [
	[ null, <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ (null value)                                                                                                                             │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ 'string', <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ string                                                                                                                                   │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ ' ! ', <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ string(3): " ! "                                                                                                                         │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ [], <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ Array                                                                                                                                    │
│ (                                                                                                                                        │
│ )                                                                                                                                        │
│                                                                                                                                          │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ [ 'no', 'yes', 'other' => [ 'maybe' => 'Still thinking about it', 'undisclosed' => 'Refuse to answer' ] ], <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ Array                                                                                                                                    │
│ (                                                                                                                                        │
│     [0] => no                                                                                                                            │
│     [1] => yes                                                                                                                           │
│     [other] => Array                                                                                                                     │
│         (                                                                                                                                │
│             [maybe] => Still thinking about it                                                                                           │
│             [undisclosed] => Refuse to answer                                                                                            │
│         )                                                                                                                                │
│                                                                                                                                          │
│ )                                                                                                                                        │
│                                                                                                                                          │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ new stdClass(), <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ stdClass Object                                                                                                                          │
│ (                                                                                                                                        │
│ )                                                                                                                                        │
│                                                                                                                                          │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	],
	[ new \Intellex\Debugger\TraceStep([]), <<<X
╒══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╕
│ {$header}
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                                          │
│ Intellex\Debugger\TraceStep Object                                                                                                       │
│ (                                                                                                                                        │
│     [type:Intellex\Debugger\TraceStep:private] =>                                                                                        │
│     [object:Intellex\Debugger\TraceStep:private] =>                                                                                      │
│     [class:Intellex\Debugger\TraceStep:private] =>                                                                                       │
│     [function:Intellex\Debugger\TraceStep:private] =>                                                                                    │
│     [args:Intellex\Debugger\TraceStep:private] =>                                                                                        │
│     [file:Intellex\Debugger\TraceStep:private] =>                                                                                        │
│     [line:Intellex\Debugger\TraceStep:private] =>                                                                                        │
│     [snippet:Intellex\Debugger\TraceStep:private] => Array                                                                               │
│         (                                                                                                                                │
│         )                                                                                                                                │
│                                                                                                                                          │
│ )                                                                                                                                        │
│                                                                                                                                          │
│                                                                                                                                          │
╘══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╛

X
	]
];

// Run tests
\Intellex\Debugger\Config::setTemplate('plain');
test($cases, function ($input) {
	ob_start();
	\Intellex\Debugger\VarDump::from($input);
	return ob_get_clean();
});

// Return to default
\Intellex\Debugger\Config::setTemplate(null);
